<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>Kubernetes By Example</title>
  <meta property="og:title" content="Kubernetes By Example" />
  <meta name="twitter:title" content="Kubernetes By Example" />
  <meta name="description" content="Introducing kubectl Objectives After completing this section, you should be able to review the basic usage of the kubectl command and understand how to connect to your Kubernetes cluster by using the CLI.
Introducing kubectl The kubectl tool is a Kubernetes command-line tool that allows you to interact with your Kubernetes cluster. It provides an easy way to perform tasks such as creating resources or redirecting cluster traffic. The kubectl tool is available for the three main operating systems (Linux, Windows and macOS).">
  <meta property="og:description" content="Introducing kubectl Objectives After completing this section, you should be able to review the basic usage of the kubectl command and understand how to connect to your Kubernetes cluster by using the CLI.
Introducing kubectl The kubectl tool is a Kubernetes command-line tool that allows you to interact with your Kubernetes cluster. It provides an easy way to perform tasks such as creating resources or redirecting cluster traffic. The kubectl tool is available for the three main operating systems (Linux, Windows and macOS).">
  <meta name="twitter:description" content="Introducing kubectl Objectives After completing this section, you should be able to review the basic usage of the kubectl command and understand how to connect to your Kubernetes cluster by using the …">
  <meta name="author" content=""/>
  <link href='https://tonejito.github.io/kbe/img/kbe-logo.ico' rel='icon' type='image/x-icon'/>
  <meta property="og:image" content="https://tonejito.github.io/kbe/img/kbe-logo.png" />
  <meta name="twitter:image" content="https://tonejito.github.io/kbe/img/kbe-logo.png" />
  <meta name="twitter:card" content="summary" />
  <meta property="og:url" content="https://tonejito.github.io/kbe/learning-paths/application-development/lesson-1/kubectl/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Kubernetes By Example" />

  <meta name="generator" content="Hugo 0.91.2" />
  <link rel="canonical" href="https://tonejito.github.io/kbe/learning-paths/application-development/lesson-1/kubectl/" />
  <link rel="alternate" href="https://tonejito.github.io/index.xml" type="application/rss+xml" title="Kubernetes By Example">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css" integrity="sha384-wITovz90syo1dJWVh32uuETPVEtGigN07tkttEqPv+uR2SE/mbQcG7ATL28aI9H0" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="https://tonejito.github.io/kbe//css/main.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="https://tonejito.github.io/kbe//css/pygment_highlights.css" />
  <link rel="stylesheet" href="https://tonejito.github.io/kbe//css/highlight.min.css" />
<link rel="stylesheet" type="text/css" href="https://tonejito.github.io/kbe/css/custom.css">


<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-WNHKJNX');</script>
  
</head>

  <body>
    
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WNHKJNX"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  
<nav class="navbar navbar-default navbar-fixed-top navbar-custom" style="padding: 0px">

  

  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://tonejito.github.io/">Home</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li class="navlinks-container">
              <a class="navlinks-parent" href="javascript:void(0)">Other topics</a>
              <div class="navlinks-children">
                
                  <a href="/kbe/topics/metallb/metallb/">MetalLB</a>
                
                  <a href="/kbe/topics/istio/istio/">Istio</a>
                
              </div>
            </li>
          
        
          
            <li class="navlinks-container">
              <a class="navlinks-parent" href="javascript:void(0)">Concepts</a>
              <div class="navlinks-children">
                
                  <a href="/kbe/concepts/pods">Pods</a>
                
                  <a href="/kbe/concepts/labels">Labels</a>
                
                  <a href="/kbe/concepts/deployments">Deployments</a>
                
                  <a href="/kbe/concepts/services">Services</a>
                
                  <a href="/kbe/concepts/port-forwarding">Port Forwarding</a>
                
                  <a href="/kbe/concepts/health-checks">Health Checks</a>
                
                  <a href="/kbe/concepts/environment-variables">Environment Variables</a>
                
                  <a href="/kbe/concepts/namespaces">Namespaces</a>
                
                  <a href="/kbe/concepts/volumes">Volumes</a>
                
                  <a href="/kbe/concepts/persistent-volumes">Persistent Volumes</a>
                
                  <a href="/kbe/concepts/secrets">Secrets</a>
                
                  <a href="/kbe/concepts/logging">Logging</a>
                
                  <a href="/kbe/concepts/jobs">Jobs</a>
                
                  <a href="/kbe/concepts/nodes">Nodes</a>
                
              </div>
            </li>
          
        
          
            <li class="navlinks-container">
              <a class="navlinks-parent" href="javascript:void(0)">Hands-on Examples</a>
              <div class="navlinks-children">
                
                  <a href="/kbe/sd/">Service Discovery</a>
                
                  <a href="/kbe/pf/">Port Forward</a>
                
                  <a href="/kbe/statefulset/">Stateful Sets</a>
                
                  <a href="/kbe/ic/">Init Containers</a>
                
                  <a href="/kbe/api/">API Server</a>
                
              </div>
            </li>
          
        
          
            <li>
              <a title="Contribute" href="https://github.com/openshift-evangelists/kbe.git">Contribute</a>
            </li>
          
        
          
            <li>
              <a title="Try out!" href="/kbe/diy/">Try out!</a>
            </li>
          
        

        

        
      </ul>
    </div>

    <div class="avatar-container">
      <div class="avatar-img-border">
        
          <a title="Kubernetes By Example" href="https://tonejito.github.io/">
            <img class="avatar-img" src="https://tonejito.github.io/kbe//img/kbe-logo.png" alt="Kubernetes By Example" />
          </a>
        
      </div>
    </div>

  </div>
</nav>




    
  
  
  




  <div class="intro-header"></div>


    
  <div class="container" role="main">
    <!-- https://kubebyexample.com/en/learning-paths/application-development-kubernetes/lesson-1-running-containerized-applications -->
<h1 id="introducing-kubectl">Introducing <code>kubectl</code></h1>
<p>Objectives
After completing this section, you should be able to review the basic usage of the <code>kubectl</code> command and understand how to connect to your Kubernetes cluster by using the CLI.</p>
<h2 id="introducing-kubectl-1">Introducing <code>kubectl</code></h2>
<p>The <code>kubectl</code> tool is a Kubernetes command-line tool that allows you to interact with your Kubernetes cluster.
It provides an easy way to perform tasks such as creating resources or redirecting cluster traffic.
The <code>kubectl</code> tool is available for the three main operating systems (Linux, Windows and macOS).</p>
<p>For example, the following command displays the <code>kubectl</code> and Kubernetes version.</p>
<pre><code class="language-bash">[user@host ~]$ kubectl version
Client Version: version.Info{Major:&quot;1&quot;, Minor:&quot;21&quot;, GitVersion:&quot;v1.21.0&quot;, GitCommit:&quot;…&quot;, GitTreeState:&quot;clean&quot;, BuildDate:&quot;…&quot;, GoVersion:&quot;…&quot;, Compiler:&quot;gc&quot;, Platform:&quot;linux/amd64&quot;}
Server Version: version.Info{Major:&quot;1&quot;, Minor:&quot;21&quot;, GitVersion:&quot;v1.21.0&quot;, GitCommit:&quot;…&quot;, GitTreeState:&quot;clean&quot;, BuildDate:&quot;…&quot;, GoVersion:&quot;…&quot;, Compiler:&quot;gc&quot;, Platform:&quot;linux/amd64&quot;}
</code></pre>
<h2 id="introducing-kubectl-configuration">Introducing <code>kubectl</code> configuration</h2>
<p><code>kubectl</code> reads all the information necessary to connect to the Kubernetes cluster from a config file within your system.
By default, this file is located at <code>$HOME/kube/config</code>.
You can change this path by setting the environment variable <code>KUBECONFIG</code> to a custom file.</p>
<p>For example, the following sample sets the <code>KUBECONFIG</code> to the file <code>/tmp/config</code>.</p>
<pre><code class="language-bash">[user@host ~]$ export KUBECONFIG=/tmp/config
</code></pre>
<p>All the commands related to the <code>kubectl</code> configuration are of the form:</p>
<pre><code class="language-bash">kubectl config option
</code></pre>
<p>If you want to see what the configuration file contains, then you can use the following command.</p>
<pre><code class="language-bash">[user@host ~]$ kubectl config view
</code></pre>
<p>The <code>kubectl</code> configuration file comprehends three topics:</p>
<ul>
<li>
<p><strong>Cluster</strong>: The URL for the API of a Kubernetes cluster. This URL identifies the cluster itself.</p>
</li>
<li>
<p><strong>User</strong>: Credentials that identify a user connecting to the Kubernetes cluster.</p>
</li>
<li>
<p><strong>Context</strong>: Puts together a cluster (the API URL) and a user (who is connecting to that cluster).</p>
</li>
</ul>
<p>For example, you might have two contexts that are using different clusters but the same user.</p>
<h2 id="defining-clusters">Defining Clusters</h2>
<p>It is often necessary to work with multiple clusters, so <code>kubectl</code> can hold the information of several Kubernetes clusters.
In relation to the configuration for <code>kubectl</code>, a cluster is just the URL of the API of the Kubernetes cluster.
The <code>kubectl config set-cluster</code> command allows you to create a new cluster connection by using the API URL.</p>
<p>For example, the following command creates a new cluster connection named <code>my-cluster</code> with server <code>127.0.0.1:8087</code>.</p>
<pre><code class="language-bash">[user@host ~]$ kubectl config set-cluster my-cluster --server=127.0.0.1:8087
</code></pre>
<p>Use the <code>get-clusters</code> command to list all available clusters.</p>
<pre><code class="language-bash">[user@host ~]$ kubectl config get-clusters
my-cluster
my-cluster-2
</code></pre>
<h2 id="defining-users">Defining Users</h2>
<p>The cluster configuration tells <code>kubectl</code> where the Kubernetes cluster is.
The user configuration identifies who connects to the cluster.
To connect to the cluster, it is necessary to provide an authentication method.
There are several options to authenticate with the cluster:</p>
<ul>
<li>Using a token</li>
</ul>
<p>The following command creates a new user named <code>my-user</code> with the token <code>Py93bt12mT</code>.</p>
<pre><code class="language-bash">[user@host ~]$ kubectl config set-credentials my-user --token=Py93bt12mT
</code></pre>
<ul>
<li>Using basic authentication</li>
</ul>
<p>The following command creates a new user named <code>my-user</code> with username <code>kubernetes-username</code> and password <code>kubernetes-password</code>.</p>
<pre><code class="language-bash">[user@host ~]$ kubectl config set-credentials my-user \
    --username=kubernetes-username --password=kubernetes-password
</code></pre>
<ul>
<li>Using certificates</li>
</ul>
<p>The following command creates a new user named <code>my-user</code> with a certificate <code>redhat-certificate.crt</code> and a key <code>redhat-key.key</code>.</p>
<pre><code class="language-bash">[user@host ~]$ kubectl config set-credentials my-user \
    --client-certificate=redhat-certificate.crt --client-key=redhat-key.key
</code></pre>
<p>Use the <code>get-users</code> command to list all available users.</p>
<pre><code class="language-bash">[user@host ~]$ kubectl config get-users
my-user
my-user-2
</code></pre>
<h2 id="defining-contexts">Defining Contexts</h2>
<p>A context puts together a cluster and a user.
<code>kubectl</code> uses both to connect and authenticate against a Kubernetes cluster.</p>
<p>For example, the following command creates a new context by using a cluster named <code>my-cluster</code> and a user named <code>my-user</code>.</p>
<pre><code class="language-bash">[user@host ~]$ kubectl config set-context --cluster=my-cluster --user=my-user
</code></pre>
<p>In a <code>kubectl</code> context, it is possible to set a namespace.
If provided, then any command would be executed in that namespace.
The following command creates a context that points to the <code>redhat-dev</code> namespace.</p>
<pre><code class="language-bash">[user@host ~]$ kubectl config set-context my-context \
    --cluster=my-cluster --user=my-user --namespace=redhat-dev
</code></pre>
<p>Once a context has been created, you can select it by using the <code>use-context</code> command.</p>
<pre><code class="language-bash">[user@host ~]$ kubectl config use-context my-context
</code></pre>
<p>After executing the previous command, further <code>kubectl</code> commands will use the <code>my-cluster</code> context and, therefore, the cluster and user associated to that context.</p>
<p>You can also list the contexts available in the configuration by using the <code>get-contexts</code> command.
The <code>*</code> in the <code>CURRENT</code> column indicates the context that you are currently using.</p>
<pre><code class="language-bash">[user@host ~]$ kubectl config get-contexts
CURRENT   NAME            CLUSTER           AUTHINFO      NAMESPACE
*         my-context      172.0.7.2:6443    my-user       redhat-dev
          my-context-2    172.1.8.0:6443    my-user-2
</code></pre>
<p>Another way of checking the current context is by using the <code>current-context</code> command.</p>
<pre><code class="language-bash">[user@host ~]$ kubectl config current-context
my-context
</code></pre>
<h2 id="working-with-resources">Working with resources</h2>
<p>Once you are connected to a Kubernetes cluster, <code>kubectl</code> allows you to list, create, update and delete Kubernetes resources.
Most of these commands will be introduced in later chapters in the course, but there are some of them that can be mentioned at this point.</p>
<h3 id="the-get-command">The <code>get</code> command</h3>
<p>This commands is used to display one or more resources.</p>
<p>For example, <code>kubectl get pods</code> will display all pods in the current namespace.</p>
<pre><code class="language-bash">[user@host ~]$ kubectl get pods
NAME       READY   STATUS        RESTARTS   AGE
example1   1/1     Running       0          67s
example2   1/1     Running       0          67s
</code></pre>
<p>If you want to display just the information for one pod, then add the pod&rsquo;s name to the previous command.</p>
<pre><code class="language-bash">[user@host ~]$ kubectl get pods example1
NAME       READY   STATUS        RESTARTS   AGE
example1   1/1     Running       0          67s
</code></pre>
<p>You can use this command to display other resources (<code>services</code>, <code>jobs</code>, <code>ingresses</code>…​).</p>
<blockquote>
<p><strong>Note</strong>
Use the command <code>kubectl</code> api-resources to display all resource types that you can create.</p>
</blockquote>
<h3 id="the-delete-command">The <code>delete</code> command</h3>
<p>This command allows you to delete a resource.</p>
<p>For example, <code>kubectl delete pod example1</code> deletes the pod named <code>example1</code>.</p>
<pre><code class="language-bash">[user@host ~]$ kubectl delete pod example1
pod &quot;example1&quot; deleted
</code></pre>
<p>You can use this command to delete other resources (<code>services</code>, <code>jobs</code>, <code>ingresses</code>…​).</p>
<h3 id="the-apply-command">The <code>apply</code> command</h3>
<p>A common way to manage Kubernetes resources is by using a <em>manifest</em>.
A manifest is a YML or JSON file containing one or many Kubernetes resources.</p>
<p>The <code>apply</code> command allows you to create, update or delete resources from a manifest.</p>
<p>For example, the following snippet creates a <strong>deployment</strong> resource.</p>
<pre><code class="language-yaml">---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
  labels:
    app: nginx
spec:
  replicas: 3
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:1.7.9
        ports:
        - containerPort: 80
</code></pre>
<p>If the snippet was in a file named <code>deployment.yaml</code>, then you could use <code>apply</code> to create the deployment.
Note that the <code>-f</code> option is used to indicate the file.</p>
<pre><code class="language-bash">[user@host ~]$ kubectl apply -f deployment.yml
deployment.apps/nginx-deployment created
</code></pre>
<hr>

  </div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
          
        </ul>
        <p class="credits copyright text-muted">
          
          &nbsp;&bull;&nbsp;
          2020

          
            &nbsp;&bull;&nbsp;
            <a href="https://tonejito.github.io/">Kubernetes By Example</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="http://gohugo.io">Hugo v0.91.2</a> powered &nbsp;&bull;&nbsp; Theme by <a href="http://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a> adapted to <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a>
          
        </p>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js" integrity="sha384-/y1Nn9+QQAipbNQWU65krzJralCnuOasHncUFXGkdwntGeSvQicrYkiUBwsgUqc1" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/contrib/auto-render.min.js" integrity="sha384-dq1/gEHSxPZQ7DdrM82ID4YVol9BYyU7GbWlIwnwyPzotpoc57wDw/guX8EaYGPx" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="https://tonejito.github.io/kbe//js/main.js"></script>
<script>

$('.language-test').parent().css('display', 'none')


var copybtns = {
  fallbackCopyTextToClipboard: function (text) {
    var txt = document.createElement("textarea");
    txt.value = text;
    
    
    txt.style.position = "fixed";
    txt.style.top = "0";
    txt.style.left = "0";
  
    document.body.appendChild(txt);
    txt.focus();
    txt.select();
    txt.setSelectionRange(0, 99999);
  
    try {
      var successful = document.execCommand('copy');
      var msg = successful ? 'successful' : 'unsuccessful';
    } catch (err) {
      console.error('Fallback: Unable to copy', err);
    }
  
    document.body.removeChild(txt);
  },
  copyTextToClipboard: function (text) {
    if (!navigator.clipboard) {
      copybtns.fallbackCopyTextToClipboard(text);
      return;
    }
    navigator.clipboard.writeText(text).then(function() {
      
    }, function(err) {
      
      copybtns.fallbackCopyTextToClipboard(text);
    });
  },
  flash: function(btn, content){
    
    content.fadeTo(50, 0.25, function() { $(this).fadeTo(300, 1.0); });
    
    btn.fadeTo(50, 0.0, function() { $(this).fadeTo(900, 1.0); });
  },
  txtClick : function(){
    var content = $(this);
    var btn = content.prev('button');
    
    copybtns.flash(btn, content);
    
    copybtns.copyTextToClipboard(content.text());
  },
  btnClick : function(){
    var btn = $(this);
    var content = $(btn.next().children()[0]);
    
    copybtns.flash(btn, content)
    
    copybtns.copyTextToClipboard(content.text());
  },
  init : function() {
    var buttonHTML = '<button type="button" data-toggle="tooltip" data-placement="top" title="Copy" class="copybtn btn btn-outline-dark"><img src="https:\/\/tonejito.github.io\/kbe\//img/Icon-Red_Hat-Media_and_documents-Paper_Stack_Blank-A-Black-RGB.png"/></button>';
    
    $('div.highlight').prepend(buttonHTML);
    
    $('button.copybtn').bind("click", copybtns.btnClick);
    $('div.highlight pre').bind("click", copybtns.txtClick);
  }
}
copybtns.init();
</script>
<script src="https://tonejito.github.io/kbe//js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script>
<script> renderMathInElement(document.body); </script>






<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-34425776-2', 'auto');
	
	ga('send', 'pageview');
}
</script>

<div class="watermark-container">
  <div class="watermark">
    For testing purposes only
  </div>
  <div style="clear: both;"></div>
</div>



  </body>
</html>

