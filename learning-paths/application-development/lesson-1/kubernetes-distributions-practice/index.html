<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>Kubernetes By Example</title>
  <meta property="og:title" content="Kubernetes By Example" />
  <meta name="twitter:title" content="Kubernetes By Example" />
  <meta name="description" content="Guided Exercise: Contrasting Kubernetes Distributions In this exercise you will prepare your development environment to use a local or remote Kubernetes instance.
Outcomes You should be able to:
 Install a local Kubernetes instance by using minikube on Linux, macOS or Windows. Register for using a remote Kubernetes instance by using Developer Sandbox for Red Hat OpenShift.  Instructions  Note Installing a local Kubernetes cluster requires administrative privileges in your development workstation.">
  <meta property="og:description" content="Guided Exercise: Contrasting Kubernetes Distributions In this exercise you will prepare your development environment to use a local or remote Kubernetes instance.
Outcomes You should be able to:
 Install a local Kubernetes instance by using minikube on Linux, macOS or Windows. Register for using a remote Kubernetes instance by using Developer Sandbox for Red Hat OpenShift.  Instructions  Note Installing a local Kubernetes cluster requires administrative privileges in your development workstation.">
  <meta name="twitter:description" content="Guided Exercise: Contrasting Kubernetes Distributions In this exercise you will prepare your development environment to use a local or remote Kubernetes instance.
Outcomes You should be able to: â€¦">
  <meta name="author" content=""/>
  <link href='https://tonejito.github.io/kbe/img/kbe-logo.ico' rel='icon' type='image/x-icon'/>
  <meta property="og:image" content="https://tonejito.github.io/kbe/img/kbe-logo.png" />
  <meta name="twitter:image" content="https://tonejito.github.io/kbe/img/kbe-logo.png" />
  <meta name="twitter:card" content="summary" />
  <meta property="og:url" content="https://tonejito.github.io/kbe/learning-paths/application-development/lesson-1/kubernetes-distributions-practice/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Kubernetes By Example" />

  <meta name="generator" content="Hugo 0.91.2" />
  <link rel="canonical" href="https://tonejito.github.io/kbe/learning-paths/application-development/lesson-1/kubernetes-distributions-practice/" />
  <link rel="alternate" href="https://tonejito.github.io/index.xml" type="application/rss+xml" title="Kubernetes By Example">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css" integrity="sha384-wITovz90syo1dJWVh32uuETPVEtGigN07tkttEqPv+uR2SE/mbQcG7ATL28aI9H0" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="https://tonejito.github.io/kbe//css/main.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="https://tonejito.github.io/kbe//css/pygment_highlights.css" />
  <link rel="stylesheet" href="https://tonejito.github.io/kbe//css/highlight.min.css" />
<link rel="stylesheet" type="text/css" href="https://tonejito.github.io/kbe/css/custom.css">


<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-WNHKJNX');</script>
  
</head>

  <body>
    
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WNHKJNX"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  
<nav class="navbar navbar-default navbar-fixed-top navbar-custom" style="padding: 0px">

  

  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://tonejito.github.io/">Home</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li class="navlinks-container">
              <a class="navlinks-parent" href="javascript:void(0)">Other topics</a>
              <div class="navlinks-children">
                
                  <a href="/kbe/topics/metallb/metallb/">MetalLB</a>
                
                  <a href="/kbe/topics/istio/istio/">Istio</a>
                
              </div>
            </li>
          
        
          
            <li class="navlinks-container">
              <a class="navlinks-parent" href="javascript:void(0)">Concepts</a>
              <div class="navlinks-children">
                
                  <a href="/kbe/concepts/pods">Pods</a>
                
                  <a href="/kbe/concepts/labels">Labels</a>
                
                  <a href="/kbe/concepts/deployments">Deployments</a>
                
                  <a href="/kbe/concepts/services">Services</a>
                
                  <a href="/kbe/concepts/port-forwarding">Port Forwarding</a>
                
                  <a href="/kbe/concepts/health-checks">Health Checks</a>
                
                  <a href="/kbe/concepts/environment-variables">Environment Variables</a>
                
                  <a href="/kbe/concepts/namespaces">Namespaces</a>
                
                  <a href="/kbe/concepts/volumes">Volumes</a>
                
                  <a href="/kbe/concepts/persistent-volumes">Persistent Volumes</a>
                
                  <a href="/kbe/concepts/secrets">Secrets</a>
                
                  <a href="/kbe/concepts/logging">Logging</a>
                
                  <a href="/kbe/concepts/jobs">Jobs</a>
                
                  <a href="/kbe/concepts/nodes">Nodes</a>
                
              </div>
            </li>
          
        
          
            <li class="navlinks-container">
              <a class="navlinks-parent" href="javascript:void(0)">Hands-on Examples</a>
              <div class="navlinks-children">
                
                  <a href="/kbe/sd/">Service Discovery</a>
                
                  <a href="/kbe/pf/">Port Forward</a>
                
                  <a href="/kbe/statefulset/">Stateful Sets</a>
                
                  <a href="/kbe/ic/">Init Containers</a>
                
                  <a href="/kbe/api/">API Server</a>
                
              </div>
            </li>
          
        
          
            <li>
              <a title="Contribute" href="https://github.com/openshift-evangelists/kbe.git">Contribute</a>
            </li>
          
        
          
            <li>
              <a title="Try out!" href="/kbe/diy/">Try out!</a>
            </li>
          
        

        

        
      </ul>
    </div>

    <div class="avatar-container">
      <div class="avatar-img-border">
        
          <a title="Kubernetes By Example" href="https://tonejito.github.io/">
            <img class="avatar-img" src="https://tonejito.github.io/kbe//img/kbe-logo.png" alt="Kubernetes By Example" />
          </a>
        
      </div>
    </div>

  </div>
</nav>




    
  
  
  




  <div class="intro-header"></div>


    
  <div class="container" role="main">
    <!-- https://kubebyexample.com/en/learning-paths/application-development-kubernetes/lesson-1-running-containerized-applications-3 -->
<h1 id="guided-exercise-contrasting-kubernetes-distributions"><strong>Guided Exercise</strong>: Contrasting Kubernetes Distributions</h1>
<p>In this exercise you will prepare your development environment to use a local or remote Kubernetes instance.</p>
<h2 id="outcomes">Outcomes</h2>
<p>You should be able to:</p>
<ul>
<li>Install a local Kubernetes instance by using <code>minikube</code> on Linux, macOS or Windows.</li>
<li>Register for using a remote Kubernetes instance by using <strong>Developer Sandbox for Red Hat OpenShift</strong>.</li>
</ul>
<h2 id="instructions">Instructions</h2>
<blockquote>
<p><strong>Note</strong>
Installing a local Kubernetes cluster requires administrative privileges in your development workstation.
If you do not have administrative privileges then jump directly to <a href="../running-applications">Using a Developer Sandbox for Red Hat OpenShift as a remote Kubernetes cluster</a> to use a remote Kubernetes cluster.</p>
</blockquote>
<p>Deploying a fully developed, multi-node Kubernetes cluster typically requires significant time and compute resources.
With <code>minikube</code>, you can quickly deploy a local Kubernetes cluster, allowing you to focus on learning Kubernetes operations and application development.</p>
<p><code>minikube</code> is an open source utility that allows you to quickly deploy a local Kubernetes cluster on your personal computer.
By using virtualization technologies, <code>minikube</code> creates a virtual machine (VM) that contains a single-node Kubernetes cluster.
VMs are virtual computers and each VM is allocated its own system resources and operating system.</p>
<p>The latest <code>minikube</code> releases also allow you to create your cluster  by using containers instead of virtual machines.
Nevertheless, this solution is still not mature, and it is not supported for this course.</p>
<p><code>minikube</code> is compatible with Linux, macOS, and Windows. To install <code>minikube</code> on your system, you need:</p>
<ul>
<li>An Internet connection</li>
<li>At least 2 GB of free memory</li>
<li>2 CPUs or more</li>
<li>At least 20 GB of free disk space</li>
<li>A locally installed hypervisor (using a container runtime is not supported in this course)</li>
</ul>
<p>Before installing <code>minikube</code>, a hypervisor technology must be installed or enabled on your local system.
A <strong>hypervisor</strong> is software that creates and manages virtual machines (VMs) on a shared physical hardware system.
The hypervisor pools and isolates hardware resources for VMs, allowing many VMs to run on a shared physical hardware system, such as a server.</p>
<ol>
<li>Using <code>minikube</code> in Linux-based systems</li>
</ol>
<p>In this course we support Fedora Linux 33 and 34, as well as Red Hat Enterprise Linux 8.</p>
<p>1.1) Installing a Hypervisor on Linux</p>
<p>The preferred hypervisor for Linux systems is <code>kvm2</code>.
<code>minikube</code> communicates with the hypervisor using the <code>libvirt</code> virtualization API libraries.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>Prefix the following commands with <code>sudo</code> if you are running a user without administrative privileges.</p>
</blockquote>
<p>Use your system package manager to install the complete set of virtualization libraries:</p>
<pre><code class="language-bash">[root@host ~]# dnf install @virtualization
</code></pre>
<p>or select the minimum set of required libraries</p>
<pre><code class="language-bash">[root@host ~]# dnf install qemu-kvm libvirt libvirt-python libguestfs-tools virt-install
</code></pre>
<p>Start the <code>libvirtd</code> service:</p>
<pre><code class="language-bash">[root@host ~]# systemctl start libvirtd
...output omitted...

[root@host ~]# systemctl enable libvirtd
...output omitted...
</code></pre>
<p>1.2) Installing <code>minikube</code> on Linux</p>
<p>There are three alternatives to install <code>minikube</code> in a Linux system:</p>
<ul>
<li>If your system contains a package manager or software manager including <code>minikube</code>, then use it and verify the version matches the minimum requirements.</li>
</ul>
<pre><code class="language-bash">[root@host ~]# dnf install minikube
</code></pre>
<ul>
<li>If the repositories for your package manager do not include an appropriate version for <code>minikube</code>, then go to <a href="https://github.com/kubernetes/minikube/releases">https://github.com/kubernetes/minikube/releases</a> and download the latest release matching your operating system.</li>
</ul>
<p>For Debian-based systems, download the file <code>minikube_VERSION_[amd64|arm64|armhf].deb</code> and install it using the <code>dpkg</code> command:</p>
<pre><code class="language-bash">[root@host ~]# dpkg -i FILE
</code></pre>
<p>For RPM-based distributions, download the file <code>minikube-VERSION.[x86_64|aarch64|armv7hl].rpm</code> and install it using the rpm command:</p>
<pre><code class="language-bash">[root@host ~]# rpm -Uvh FILE
</code></pre>
<ul>
<li>Alternatively, download the binary <code>minikube-linux-[amd64|arm|arm64]</code> file and install using the install command:</li>
</ul>
<pre><code class="language-bash">[root@host ~]# install FILE /usr/local/bin/minikube
</code></pre>
<p>1.3) Starting Your <code>minikube</code> Cluster on Linux</p>
<p>To initialize your <code>minikube</code> cluster, use the <code>minikube</code> start command.</p>
<pre><code class="language-bash">[root@host ~]# minikube start --driver=kvm2
  minikube v1.20.0 on Fedora 33
  Using the kvm2 driver based on user configuration
  Starting control plane node minikube in cluster minikube
  Creating kvm2 VM (CPUs=4, Memory=16384MB, Disk=20000MB) ...
  Preparing Kubernetes v1.20.2 on Docker 20.10.6 ...
    â–ª Generating certificates and keys ...
    â–ª Booting up control plane ...
    â–ª Configuring RBAC rules ...
  Verifying Kubernetes components...
    â–ª Using image gcr.io/k8s-minikube/storage-provisioner:v5
  Enabled addons: storage-provisioner, default-storageclass
  Done! kubectl is now configured to use &quot;minikube&quot; cluster and &quot;default&quot; namespace by default
</code></pre>
<blockquote>
<p><strong>Note</strong></p>
<p>To set the default driver, run the command <code>minikube config set driver DRIVER</code>.</p>
</blockquote>
<ol start="2">
<li><strong>Using <code>minikube</code> on macOS systems</strong></li>
</ol>
<p>This course supports macOS Big Sur (version 11.3.1) and later minor updates.</p>
<p>2.1) Installing a Hypervisor on macOS</p>
<p>Despite Docker being the preferred installation method in macOS, current <code>minikube</code> versions do not support all the features required for this course when running the docker driver (to be precise, <code>ingress</code> add-on is not yet supported).
For this reason, we are using the <strong>Oracle VM VirtualBox</strong> hypervisor for running the virtual machines needed to support <code>minikube</code> on macOS.</p>
<p>Oracle VM VirtualBox is a free and open source hypervisor available for macOS systems.
To install Oracle VM VirtualBox:</p>
<ul>
<li>
<p>Download the latest version of VirtualBox for OS X hosts from <a href="https://virtualbox.org/wiki/Downloads">https://virtualbox.org/wiki/Downloads</a></p>
</li>
<li>
<p>Open the downloaded dmg file and follow the onscreen instructions to complete the installation.</p>
</li>
</ul>
<blockquote>
<p><strong>Note</strong></p>
<p>Network connectivity might be temporarily lost while VirtualBox installs virtual network adapters.
A system reboot can also be required after a successful installation.</p>
</blockquote>
<p>Alternatively, if the <code>brew</code> command is available in your system, then you can install <code>VirtualBox</code> using the <code>brew install</code> command.</p>
<pre><code class="language-bash">user@host ~ % brew install virtualbox
</code></pre>
<p>2.2) Installing <code>minikube</code> on macOS</p>
<p>To install <code>minikube</code> on macOS, download from <a href="https://github.com/kubernetes/minikube/releases">https://github.com/kubernetes/minikube/releases</a> the appropriate file for your architecture: <code>minikube-darwin-amd64</code> or <code>minikube-darwin-arm64</code>.</p>
<p>Then open a terminal window, change to the directory where you downloaded the installer and use the <code>install</code> command with administrator privileges to run the installer.
Make sure you install <code>minikube</code> in a folder in your system path, such as <code>/usr/local/bin/minikube</code>.</p>
<pre><code class="language-bash">host:~ root# install minikube-darwin-amd64 /usr/local/bin/minikube
</code></pre>
<p>This places the <code>minikube</code> executable in <code>/usr/local/bin/minikube</code>.</p>
<p>Apple notarizing features forbid running files downloaded from the internet unless authorized.
If you try to run the <code>minikube</code> command then you will get a <code>&quot;minikube&quot; cannot be opened because the developer cannot be verified</code> message, and the application will be terminated.</p>
<p>To authorize the <code>minikube</code> application, use the xattr command with administrative privileges with the following options:</p>
<pre><code class="language-bash">host:~ root# xattr -r -d com.apple.quarantine /usr/local/bin/minikube
</code></pre>
<p>Verity that now you can execute the <code>minikube</code> command:</p>
<pre><code class="language-bash">host:~ root# minikube version
minikube version: v1.20.0
commit: c61663e942ec43b20e8e70839dcca52e44cd85ae
</code></pre>
<p>Your output can differ, but must show the available version and the commit it is based on.</p>
<p>2.3) Starting Your <code>minikube</code> Cluster on macOS</p>
<p>To initialize your <code>minikube</code> cluster, use the <code>minikube start</code> command.</p>
<pre><code class="language-bash">user@host ~ % minikube start --driver=virtualbox
?  minikube v1.20.0 on Darwin 11.3.1
âœ¨  Using the virtualbox driver based on user configuration
?  Starting control plane node minikube in cluster minikube
?  Creating virtualbox VM (CPUs=4, Memory=16384MB, Disk=20000MB) ...
?  Preparing Kubernetes v1.20.2 on Docker 20.10.6 ...
    â–ª Generating certificates and keys ...
    â–ª Booting up control plane ...
    â–ª Configuring RBAC rules ...
?  Verifying Kubernetes components...
    â–ª Using image gcr.io/k8s-minikube/storage-provisioner:v5
?  Enabled addons: storage-provisioner, default-storageclass
?  Done! kubectl is now configured to use &quot;minikube&quot; cluster and &quot;default&quot; namespace by default
</code></pre>
<blockquote>
<p><strong>Note</strong></p>
<p>To set the default driver, run the command <code>minikube config set driver DRIVER</code>.</p>
</blockquote>
<ol start="3">
<li><strong>Using <code>minikube</code> on Windows</strong></li>
</ol>
<p>In this course we support Windows 10 Pro and Enterprise versions.</p>
<p>3.1) Installing a Hypervisor on Windows</p>
<p>There are several hypervisors available for Windows systems, including <strong>Oracle VM VirtualBox</strong> and <strong>Microsoft Hyper-V</strong>.</p>
<blockquote>
<p><strong>Warning</strong></p>
<p>System driver conflicts might occur if more than one hypervisor is installed or enabled.
Do not install or enable more than one hypervisor on your system.</p>
</blockquote>
<p><strong>Installing Oracle VM VirtualBox installation</strong></p>
<p>Oracle VM VirtualBox is a free, open source hypervisor.
As the original driver for <code>minikube</code>, Oracle VM VirtualBox provides the most stability for Microsoft Windows 10 users.</p>
<p>Download the latest version of VirtualBox for Windows Hosts from <a href="https://virtualbox.org/wiki/Downloads">https://virtualbox.org/wiki/Downloads</a></p>
<p>Open the downloaded VirtualBox executable and follow the onscreen instructions to complete the installation.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>Network connectivity might be temporarily lost while VirtualBox installs virtual network adapters.
A system reboot can also be required after a successful installation.</p>
</blockquote>
<p><strong>Enabling Microsoft Hyper-V</strong></p>
<p>Microsoft Hyper-V is a built-in hypervisor available on modern 64-bit versions of Microsoft Windows 10 Pro, Enterprise, and Education editions.
Enabling Microsoft Hyper-V can be accomplished through PowerShell or by adjusting system Settings.</p>
<p>Refer to Microsoft Hyper-V documentation for system and hardware requirements.</p>
<p>Via PowerShell</p>
<ul>
<li>
<p>Launch a PowerShell console as Administrator.</p>
</li>
<li>
<p>In the console window, run the following command:</p>
</li>
</ul>
<pre><code class="language-powershell">PS C:\&gt; Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Hyper-V -All
</code></pre>
<ul>
<li>Restart your system when prompted to finish the installation process.</li>
</ul>
<p>Via Settings</p>
<ul>
<li>
<p>In the search box on the taskbar, type <strong>Programs and Features</strong>, and select it from the search results.</p>
</li>
<li>
<p>Select Turn <strong>Windows features on or off</strong> from the list of options under Control Panel Home.</p>
</li>
<li>
<p>Select <strong>Hyper-V</strong> and click OK to begin the installation.</p>
</li>
<li>
<p>Restart your system when prompted to finish the installation process.</p>
</li>
</ul>
<p>With Microsoft Hyper-V successfully enabled, create an external virtual switch to grant <code>minikube</code> access to your physical network.</p>
<ul>
<li>
<p>Open a PowerShell console as Administrator.</p>
</li>
<li>
<p>Determine the name of the network adapter, such as Wi-Fi or Ethernet, to use by running <code>Get-NetAdapter</code>.</p>
</li>
<li>
<p>Create an external virtual switch named <code>minikube</code> that uses the selected network adapter and allows the management operating system to share the adapter:</p>
</li>
</ul>
<pre><code class="language-powershell">PS C:\&gt; New-VMSwitch -name minikube -NetAdapterName &lt;AdapterName&gt; -AllowManagementOS $true
</code></pre>
<ul>
<li>Restart your system to clear out potential routing problems.</li>
</ul>
<p>3.2) Installing <code>minikube</code> on Windows</p>
<p>With a hypervisor installed, your system is now ready to begin the <code>minikube</code> installation process.</p>
<ul>
<li>
<p>Download the stand-alone <code>minikube</code> Windows installer from <a href="https://github.com/kubernetes/minikube/releases">https://github.com/kubernetes/minikube/releases</a></p>
</li>
<li>
<p>Open the downloaded <code>minikube-installer.exe</code> to begin the guided installation process.</p>
</li>
</ul>
<blockquote>
<p><strong>Note</strong></p>
<p>If you executed the <code>minikube-installer.exe</code> installer from a terminal window, close the terminal and open a new one before you start using minikube.</p>
</blockquote>
<p>3.3) Starting Your minikube Cluster on Windows</p>
<p>To initialize your <code>minikube</code> cluster, use the <code>minikube start</code> command.</p>
<p>To use the Microsoft Hyper-V driver, provide the <code>--driver=hyperv</code> option to <code>minikube</code>:</p>
<pre><code class="language-powershell">PS C:\&gt; minikube start --driver=hyperv
?  minikube v1.20.0 on Microsoft Windows 10 Enterprise 10.0.18363 Build 18363
âœ¨  Using the hyperv driver based on user configuration
?  Starting control plane node minikube in cluster minikube
?  Creating hyperv VM (CPUs=4, Memory=16384MB, Disk=20000MB) ...
?  Preparing Kubernetes v1.20.2 on Docker 20.10.6 ...
    â–ª Generating certificates and keys ...
    â–ª Booting up control plane ...
    â–ª Configuring RBAC rules ...
?  Verifying Kubernetes components...
    â–ª Using image gcr.io/k8s-minikube/storage-provisioner:v5
?  Enabled addons: storage-provisioner, default-storageclass
?  Done! kubectl is now configured to use &quot;minikube&quot; cluster and &quot;default&quot; namespace by default
</code></pre>
<p>To use the Oracle VM VirtualBox driver, provide the <code>--driver=virtualbox</code> option to <code>minikube</code>:</p>
<pre><code class="language-powershell">PS C:\&gt; minikube start --driver=virtualbox
?  minikube v1.20.0 on Microsoft Windows 10 Enterprise 10.0.18363 Build 18363
âœ¨  Using the virtualbox driver based on user configuration
?  Starting control plane node minikube in cluster minikube
?  Creating virtualbox VM (CPUs=4, Memory=16384MB, Disk=20000MB) ...
?  Preparing Kubernetes v1.20.2 on Docker 20.10.6 ...
    â–ª Generating certificates and keys ...
    â–ª Booting up control plane ...
    â–ª Configuring RBAC rules ...
?  Verifying Kubernetes components...
    â–ª Using image gcr.io/k8s-minikube/storage-provisioner:v5
?  Enabled addons: storage-provisioner, default-storageclass
?  Done! kubectl is now configured to use &quot;minikube&quot; cluster and &quot;default&quot; namespace by default
</code></pre>
<blockquote>
<p><strong>Note</strong></p>
<p>To set the default driver, run the command <code>minikube config set driver DRIVER</code>.</p>
</blockquote>
<ol start="4">
<li><strong>Verifying your <code>minikube</code> installation</strong></li>
</ol>
<p>Use the <code>minikube status</code> command to validate that the <code>minikube</code> installation is running successfully:</p>
<pre><code class="language-bash">[root@host ~]# minikube status
minikube
type: Control Plane
host: Running
kubelet: Running
apiserver: Running
kubeconfig: Configured
</code></pre>
<p>In case of errors, make sure you are using the appropriate driver during the installation, or refer to <a href="https://minikube.sigs.k8s.io/docs/start/"><code>minikube</code> Get Started documentation</a> for troubleshooting.</p>
<ol start="5">
<li><strong>Adding extensions</strong></li>
</ol>
<p><code>minikube</code> comes with the bare minimum set of features.
To add more features, <code>minikube</code> provides an add-on based extension system.
Developers can add more features by installing the needed add-ons.</p>
<p>Use the <code>minikube addons list</code> command for a comprehensive list of the add-ons available and the installation status.</p>
<ul>
<li>Installing the <strong>Ingress</strong> Add-on. For this course you must install the <code>ingress</code> add-on.</li>
</ul>
<p>With your cluster up and ready, use the following command to enable the add-on:</p>
<pre><code class="language-bash">[root@host ~]# minikube addons enable ingress
    â–ª Using image k8s.gcr.io/ingress-nginx/controller:v0.44.0
    â–ª Using image docker.io/jettech/kube-webhook-certgen:v1.5.1
    â–ª Using image docker.io/jettech/kube-webhook-certgen:v1.5.1
?  Verifying ingress addon...
?  The 'ingress' addon is enabled
</code></pre>
<p>Versions and docker images can vary in your deployment, but make sure the final validation is successful.</p>
<ul>
<li>Installing the <strong>Dashboard</strong> add-on. The <code>dashboard</code> add-on is not required for this course but serves as a visual graphical interface if you are not comfortable with CLI commands.</li>
</ul>
<p>Enable the <code>dashboard</code> add-on with the following command:</p>
<pre><code class="language-bash">[root@host ~]# minikube addons enable dashboard
    â–ª Using image kubernetesui/dashboard:v2.1.0
...output omitted...
?  The 'dashboard' addon is enabled
</code></pre>
<p>Once the dashboard is enabled you can reach it by using the <code>minikube dashboard</code> command.
This command will open the dashboard web application in your default browser.</p>
<p>Press <code>Ctrl+C</code> in the terminal to finish the connection to the dashboard.</p>
<ol start="6">
<li><strong>Using a Developer Sandbox for Red Hat OpenShift as a Remote Kubernetes cluster</strong></li>
</ol>
<p><strong>Developer Sandbox for Red Hat OpenShift</strong> is a free Kubernetes-as-a-Service platform offered by Red Hat Developers, based on Red Hat OpenShift.</p>
<p>Developer Sandbox allows users access to a pre-created Kubernetes cluster.
Access is restricted to two namespaces (or projects if using OpenShift nomenclature).
Developer Sandbox deletes pods after eight consecutive hours of running, and limits resources to 7 GB of RAM and 15 GB of persistent storage.</p>
<p>6.1) Create a Developer Sandbox account</p>
<p>Go to <a href="https://developers.redhat.com/developer-sandbox">https://developers.redhat.com/developer-sandbox</a> and click Get started in the Sandbox.</p>
<table>
<thead>
<tr>
<th style="text-align:center"><img src="https://kubebyexample.com/sites/default/files/2021-06/devsandbox-start.png" alt="Get started in the sandbox screenshot"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Get started in the sandbox</td>
</tr>
</tbody>
</table>
<p>You need a free Red Hat account to use Developer Sandbox.
Log in to your Red Hat account, or if you do not have one, then click <strong>Create one now</strong>.
Fill in the form choosing a <strong>Personal</strong> account type, and then click <strong>Create my account</strong>.
You might need to accept Red Hat terms and conditions to use the Developer Program services.</p>
<p>When the account is ready you will be redirected back to the Developer Sandbox page.
Click <strong>Launch your Developer Sandbox for Red Hat OpenShift</strong> to log in to Developer Sandbox.</p>
<table>
<thead>
<tr>
<th style="text-align:center"><img src="https://kubebyexample.com/sites/default/files/2021-06/devsandbox-launch.png" alt="Launch your developer sandbox screenshot"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Launch your developer sandbox</td>
</tr>
</tbody>
</table>
<p>If you just created your account, then you might need to wait some seconds for account approval.
You might need to verify your account via 2-factor authentication.</p>
<p>Once the account is approved and verified, Click <strong>Start using your sandbox</strong>.
You might need to accept Red Hat terms and conditions to use the Developer Sandbox.</p>
<table>
<thead>
<tr>
<th style="text-align:center"><img src="https://kubebyexample.com/sites/default/files/2021-06/devsandbox-use.png" alt="Start using your sandbox screenshot"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Start using your sandbox</td>
</tr>
</tbody>
</table>
<p>In the OpenShift log in form, click DevSandbox to select the authentication method.</p>
<table>
<thead>
<tr>
<th style="text-align:center"><img src="https://kubebyexample.com/sites/default/files/2021-06/devsandbox-login.png" alt="OpenShift Login"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">OpenShift Login</td>
</tr>
</tbody>
</table>
<p>If requested, then log in using your Red Hat account credentials.</p>
<p>6.2) Start Using Developer Sandbox</p>
<p>The Kubernetes cluster and two namespaces are created for you.
Only the <code>username-dev</code> and <code>username-stage</code> namespaces are available, and you can not create more.</p>
<table>
<thead>
<tr>
<th style="text-align:center"><img src="https://kubebyexample.com/sites/default/files/2021-06/devsandbox-console.png" alt="OpenShift topology"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">OpenShift topology</td>
</tr>
</tbody>
</table>
<ol start="7">
<li>Enabling external access to Ingress.</li>
</ol>
<p>Some exercises require you to identify the external IP and hostname associated with your Ingress so you can access your application from outside the cluster.</p>
<p>7.1) External access to <code>minikube</code>.</p>
<p>Routing traffic from your local machine to your <code>minikube</code> Kubernetes cluster requires two steps.</p>
<p>First you must find the local IP assigned to your Ingress add on.
The <code>minikube ip</code> command is the easiest way to find the ingress IP:</p>
<pre><code class="language-bash">[user@host ~]$ minikube ip
192.168.99.103
</code></pre>
<p>Your IP will probably be different as it depends on your virtual environment configuration.</p>
<p>Second, you must declare a hostname for your ingress, and associate the hostname to the ingress IP.
For this course, unless the hostname is already in use, you will declare <code>hello.example.com</code> as the hostname.</p>
<p>Despite this the association between the IP and the hostname is usually done using a DNS server, when using a local distribution such as <code>minikube</code> it is much easier to simulate domain ownership by editing your local name resolution system.</p>
<p>In <strong>Linux</strong> and <strong>macOS</strong> systems, edit the <code>/etc/hosts</code> file with elevated privileges.
You might use the <code>sudo</code> or the <code>su</code> commands to obtain elevated privileges.
In <strong>Windows</strong> systems, edit the <code>C:\Windows\System32\drivers\etc\hosts</code> file with administrative privileges.</p>
<p>Add the following line to the bottom of the file and replace <code>&lt;IP-ADDRESS&gt;</code> with the IP address listed in the previous step.</p>
<pre><code class="language-text">&lt;IP-ADDRESS&gt; hello.example.com
</code></pre>
<blockquote>
<p><strong>Note</strong></p>
<p>If for any reason you need to delete and recreate your Minikube cluster, then review the IP address assigned to the cluster and update the hosts file accordingly.</p>
</blockquote>
<p>For accessing services in the cluster you will use the declared hostname and potentially any path associated to the ingress.
So, if using the <code>hello.example.com</code> hostname and assuming the application is mapped to the path <code>/myapp</code>, then your application will be available in the URL <code>http://hello.example.com/myapp</code>.</p>
<p>7.2) External access to Developer Sandbox.</p>
<p>External access to Developer Sandbox is already prepared.
The ingress controller in Developer Sandbox is pre-configured to listen to requests sent to any sub-domain for a hostname known as the <strong>wildcard domain</strong>.
The wildcard domain is a configuration value set by administrators when creating the cluster.</p>
<p>To enable external access to a service you must provide a sub-domain for the wildcard domain, so first you must know the wildcard domain.</p>
<p>There are several approaches for finding the wildcard domain associated to your Developer Sandbox instance:</p>
<ul>
<li><strong>Infer the wildcard domain from the Console URL</strong></li>
</ul>
<p>When you log into you Developer Sandbox account, you will be redirected to the OpenShift Console installed in the cluster.
The URL for the OpenShift Console is of the form <code>https://console-openshift-console.apps.${WILDCARD-DOMAIN}</code>.</p>
<p>To get the wildcard domain, replace the console-openshift-console subdomain with apps from the console URL.
For example, the wildcard domain for the Console URL <code>https://console-openshift-console.apps.sandbox.x8i5.p1.openshiftapps.com</code> is <code>apps.sandbox.x8i5.p1.openshiftapps.com</code>.</p>
<ul>
<li><strong>Infer the wildcard domain from the API URL</strong></li>
</ul>
<p>In Guided Exercise: Connecting kubectl to your Cluster you will find instructions to identify the API URL for your Developer Sandbox cluster.</p>
<p>To get the wildcard domain, remove from the API URL the <code>https://</code>, the <code>:6443</code>, and change <code>api</code> to <code>apps</code>.
For example, the wildcard domain for the API URL <code>https://api.sandbox.x8i5.p1.openshiftapps.com:6443</code> is <code>apps.sandbox.x8i5.p1.openshiftapps.com</code>.</p>
<ul>
<li><strong>Infer from a dry-run route creation</strong></li>
</ul>
<p>If you are using a Linux or macOS system, you can use the <code>kubectl</code> command to create a <code>route</code> resource that contains an example URL and extract the hostname from it.</p>
<p>Create a file named <code>example-route.yaml</code> with the following content:</p>
<pre><code class="language-yaml">apiVersion: route.openshift.io/v1
kind: Route
metadata:
  name: example
spec:
  to:
    kind: Service
    name: hello
</code></pre>
<p>Then invoke the <code>kubectl</code> command to create the <code>route</code>.</p>
<pre><code class="language-bash">[user@host ~]$ kubectl apply -f example-route.yaml \
    --dry-run=server -o jsonpath='{.spec.host}'
example-username-dev.apps.sandbox.x8i5.p1.openshiftapps.com
</code></pre>
<p>To get the wildcard domain, remove the first part of the hostname, that is everything before the <strong>first</strong> period.
For example, the wildcard domain for the hostname <code>example-username-dev.apps.sandbox.x8i5.p1.openshiftapps.com</code> is <code>apps.sandbox.x8i5.p1.openshiftapps.com</code>.</p>
<p>Once you know the wildcard domain for your Developer Sandbox cluster, use it to generate a sub-domain to be used by your services.
Remember that sub-domains must be unique for the shared Developer Sandbox cluster.
One method for creating a unique sub-domain is to compose it in the format of <code>&lt;deployment-name&gt;-&lt;namespace&gt;.&lt;wildcard-domain&gt;</code>.</p>
<p>So, if are using the <code>apps.sandbox.x8i5.p1.openshiftapps.com</code> wildcard domain, and assuming a deployment named <code>hello</code> in a namespace named <code>username-dev</code>, then you can compose your application hostname as <code>hello-username-dev.apps.sandbox.x8i5.p1.openshiftapps.com</code>.</p>
<p>Assuming the application is mapped to the path <code>/myapp</code>, then your application will be available in the URL <code>http://hello-username-dev.apps.sandbox.x8i5.p1.openshiftapps.com/myapp</code>.</p>
<p>This concludes the guided exercise.</p>
<hr>
<h2 id="references">References</h2>
<ul>
<li><a href="https://minikube.sigs.k8s.io/docs/start/"><code>minikube</code>: Get Started documentation</a></li>
<li><a href="https://kubernetes.io/docs/tasks/tools/install-kubectl-windows/">Install and Set Up <code>kubectl</code> on Windows</a></li>
<li><a href="https://minikube.sigs.k8s.io/docs/drivers/virtualbox/"><code>minikube</code> <code>virtualbox</code> driver</a></li>
<li><a href="https://www.virtualbox.org/manual/ch02.html">Installing VirtualBox on Windows Hosts</a></li>
<li><a href="https://minikube.sigs.k8s.io/docs/drivers/hyperv/"><code>minikube</code> <code>hyperv</code> driver</a></li>
<li><a href="https://docs.microsoft.com/en-us/virtualization/hyper-v-on-windows/quick-start/enable-hyper-v">Install Hyper-V on Windows 10</a></li>
<li><a href="https://docs.microsoft.com/en-us/windows-server/virtualization/hyper-v/get-started/create-a-virtual-switch-for-hyper-v-virtual-machines">Create a virtual switch for Hyper-V virtual machines</a></li>
</ul>

  </div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
          
        </ul>
        <p class="credits copyright text-muted">
          
          &nbsp;&bull;&nbsp;
          2020

          
            &nbsp;&bull;&nbsp;
            <a href="https://tonejito.github.io/">Kubernetes By Example</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="http://gohugo.io">Hugo v0.91.2</a> powered &nbsp;&bull;&nbsp; Theme by <a href="http://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a> adapted to <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a>
          
        </p>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js" integrity="sha384-/y1Nn9+QQAipbNQWU65krzJralCnuOasHncUFXGkdwntGeSvQicrYkiUBwsgUqc1" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/contrib/auto-render.min.js" integrity="sha384-dq1/gEHSxPZQ7DdrM82ID4YVol9BYyU7GbWlIwnwyPzotpoc57wDw/guX8EaYGPx" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="https://tonejito.github.io/kbe//js/main.js"></script>
<script>

$('.language-test').parent().css('display', 'none')


var copybtns = {
  fallbackCopyTextToClipboard: function (text) {
    var txt = document.createElement("textarea");
    txt.value = text;
    
    
    txt.style.position = "fixed";
    txt.style.top = "0";
    txt.style.left = "0";
  
    document.body.appendChild(txt);
    txt.focus();
    txt.select();
    txt.setSelectionRange(0, 99999);
  
    try {
      var successful = document.execCommand('copy');
      var msg = successful ? 'successful' : 'unsuccessful';
    } catch (err) {
      console.error('Fallback: Unable to copy', err);
    }
  
    document.body.removeChild(txt);
  },
  copyTextToClipboard: function (text) {
    if (!navigator.clipboard) {
      copybtns.fallbackCopyTextToClipboard(text);
      return;
    }
    navigator.clipboard.writeText(text).then(function() {
      
    }, function(err) {
      
      copybtns.fallbackCopyTextToClipboard(text);
    });
  },
  flash: function(btn, content){
    
    content.fadeTo(50, 0.25, function() { $(this).fadeTo(300, 1.0); });
    
    btn.fadeTo(50, 0.0, function() { $(this).fadeTo(900, 1.0); });
  },
  txtClick : function(){
    var content = $(this);
    var btn = content.prev('button');
    
    copybtns.flash(btn, content);
    
    copybtns.copyTextToClipboard(content.text());
  },
  btnClick : function(){
    var btn = $(this);
    var content = $(btn.next().children()[0]);
    
    copybtns.flash(btn, content)
    
    copybtns.copyTextToClipboard(content.text());
  },
  init : function() {
    var buttonHTML = '<button type="button" data-toggle="tooltip" data-placement="top" title="Copy" class="copybtn btn btn-outline-dark"><img src="https:\/\/tonejito.github.io\/kbe\//img/Icon-Red_Hat-Media_and_documents-Paper_Stack_Blank-A-Black-RGB.png"/></button>';
    
    $('div.highlight').prepend(buttonHTML);
    
    $('button.copybtn').bind("click", copybtns.btnClick);
    $('div.highlight pre').bind("click", copybtns.txtClick);
  }
}
copybtns.init();
</script>
<script src="https://tonejito.github.io/kbe//js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script>
<script> renderMathInElement(document.body); </script>






<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-34425776-2', 'auto');
	
	ga('send', 'pageview');
}
</script>

<div class="watermark-container">
  <div class="watermark">
    For testing purposes only
  </div>
  <div style="clear: both;"></div>
</div>



  </body>
</html>

